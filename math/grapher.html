<html>
 <meta charset="UTF-8"> 
<head>
  <title>Function Grapher</title>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript" src="functions.js"></script>
	</head>
	<body>
      <h1> Math Pages <a href="./index.html">Index</a></h1>
    <div>
      <p>
        On this page: graph a function!
      </p>
    </div>
    <div id="sel">
      Min x: <input type="number" id="min_x" value="-2">
      Max x: <input type="number" id="max_x" value="4">
      <br>  
      Min y: <input type="number" id="min_y" value="-10">
      Max y: <input type="number" id="max_y" value="20">
      <br>  

      f(x)=   <input type="text" id="exp_1" value="x * x * x - 2 * x * x - 4 * x" size=40><br>
      g(x)=<input type="text" id="exp_2" value="Math.pow(Math.log(x), 2)" size=40><br> 
      <!--h(x)=<input type="text" id="exp_3" value="10" size=40><br>-->
      <br>
       <input type="button" onclick="drawBackgroundColor()" value="Graph">
      </div>
		<div id="chart_div"></div>
	</body>
<script>
google.charts.load('current', {packages: ['corechart', 'line']});
google.charts.setOnLoadCallback(drawBackgroundColor);
var options;
var data;
var buf = 200; //How many points to plot?
var pi = 3.14159265358979323846;

function sin(x) {
  return Math.sin(x);
}


function drawBackgroundColor() {
      var expression1 = document.getElementById("exp_1").value;
      var expression2 = document.getElementById("exp_2").value;
      var min_x = Number(document.getElementById("min_x").value);
      var max_x = Number(document.getElementById("max_x").value);
      var min_y = Number(document.getElementById("min_y").value);
      var max_y = Number(document.getElementById("max_y").value);

      var interval = (max_x - min_x) / buf;

      data = new google.visualization.DataTable();
      data.addColumn('number', 'x');
      data.addColumn('number', 'f(x)');
      data.addColumn('number', 'g(x)');

      var x;
      var fx;
      if (!(min_x || min_y || max_x || max_y) || interval == 0) {
        return;
      }
      for (x = min_x; x <= max_x + interval; x += interval) {
        fx = eval(expression1);
        gx = eval(expression2);
        data.addRow([x, fx, gx]);
      }

      options = {
        'legend': {'position': 'top'},
        hAxis: {
          title: 'x',
          viewWindow:{
                max:max_x,
                min:min_x
              },
        },
        vAxis: {
          title: 'y',
          viewWindow:{
                max:max_y,
                min:min_y
              }
        },
  		  'height':620,
        backgroundColor: '#fff',
      };

      var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
      chart.draw(data, options);
    }


document.getElementById('sel').onkeypress = function(event) {
    if (event.keyCode == 13) {
         drawBackgroundColor();      
    }
}
</script>
</html>