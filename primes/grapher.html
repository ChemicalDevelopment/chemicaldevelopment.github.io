<html>
 <meta charset="UTF-8"> 
<head>
  <title>Function Grapher</title>
	  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	</head>
	<body>
      <h1> Prime Pages <a href="./index.html">Index</a></h1>
    <div>
      <p>
        On this page: graph a function!
      </p>
    </div>
    <div id="sel">
      Min x: <input type="number" id="min_x" value="-2">
      Max x: <input type="number" id="max_x" value="4">
      <br>  
      Min y: <input type="number" id="min_y" value="-10">
      Max y: <input type="number" id="max_y" value="20">
      <br>  

      f(x)=   <input type="text" id="exp_1" value="x * x * x - 2 * x * x - 4 * x" size=40><br>
      g(x)=<input type="text" id="exp_2" value="Math.pow(Math.log(x), 2)" size=40><br> 
      <!--h(x)=<input type="text" id="exp_3" value="10" size=40><br>-->
      <br>
       <input type="button" onclick="drawBackgroundColor()" value="Graph">
      </div>
		<div id="chart_div"></div>
	</body>
<script>
google.charts.load('current', {packages: ['corechart', 'line']});
google.charts.setOnLoadCallback(drawBackgroundColor);
var options;
var data;
var buf = 500; //How many points to plot?
var pi = 3.14159265358979323846;

/*

A few number theory functions.

*/

function zeta(x) {
  var sum = 1;
  for (var i = 2; i < 1000; ++i) {
    sum += Math.pow(i, -x);
  }
  return sum;
}

function gamma(x) {
  return Math.exp(x * Math.log(x) - x - (Math.log(x  / (2 * pi))) / 2 + 1 / (12 * x) - 1 / (360 * x * x * x) + 1 / (1260 * x * x * x * x * x));
}

function floor(x) {
  return Math.floor(x);
}

function gcd(a, b) {
   if ( ! b) {
        return a;
    }
    return gcd(b, a % b);
}

function exp(x) {
  return Math.exp(x);
}

function pow(a, b) {
  return Math.pow(a, b);
}

function sqrt(x) {
  return Math.sqrt(x);
}

function log(x) {
  return Math.log(x); 
}

function fac(x) {
  var pr = 1;
  for (var i = 1; i <= x; ++i) {
    pr *= i;
  }
  return pr;
}

function prod_p1(x) {
  var p = 1;
  var x_i = x;
  for (var i = 1; i < 1000; ++i) {
    if (x_i >= 10000000000) {
      break;
    }
    p *= (x_i) / (x_i - 1);
    x_i *= x;
  }
  return p;
}

function dragon_geometric(x) {
  var sum = 0;
  for (var i = 1; i < 1000; ++i) {  
    sum += pow(-1, i) * pow(i, x - i);
  }
  return sum;
}

function isprime(z) {
  if (z == 0 || z == 1) {
    return 0;
  }
  if (z == 2) {
    return 1;
  }
  if (z % 2 == 0) {
    return 0;
  }
  for (var c = 3; c < Math.sqrt(z); c += 2) { 
    if (z % c == 0) {
      return 0;
    }
  }
  return 1;
}


function drawBackgroundColor() {
      var expression1 = document.getElementById("exp_1").value;
      var expression2 = document.getElementById("exp_2").value;
      //var expression3 = document.getElementById("exp_3").value;
      var min_x = Number(document.getElementById("min_x").value);
      var max_x = Number(document.getElementById("max_x").value);
      var min_y = Number(document.getElementById("min_y").value);
      var max_y = Number(document.getElementById("max_y").value);

      var interval = (max_x - min_x) / buf;

      data = new google.visualization.DataTable();
      data.addColumn('number', 'x');
      data.addColumn('number', 'f(x)');
      data.addColumn('number', 'g(x)');
      //data.addColumn('number', 'h(x)');

      var x;
      var fx;
      //var gx;
      //var hx;
      if (!(min_x || min_y || max_x || max_y) || interval == 0) {
        return;
      }
      for (x = min_x; x <= max_x + interval; x += interval) {
        fx = eval(expression1);
        gx = eval(expression2);
        //hx = eval(expression3);
        if (fx > max_y) {
          fx = max_y;
        }
        if (gx > max_y) {
          gx = max_y;
        }
        /*if (hx > max_y) {
          hx = max_y;
        }*/
        if (fx < min_y) {
          fx = min_y;
        }
        if (gx < min_y) {
          gx = min_y;
        }
        /*if (hx < min_y) {
          hx = min_y;
        }
        data.addRow([x, fx, gx, hx]);*/
        data.addRow([x, fx, gx]);
      }

      options = {
        'legend': {'position': 'top'},
        hAxis: {
          title: 'x'
        },
        vAxis: {
          title: 'y'
        },
  		  'height':620,
        backgroundColor: '#fff'
      };

      var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
      chart.draw(data, options);
    }


document.getElementById('sel').onkeypress = function(event) {
    if (event.keyCode == 13) {
         drawBackgroundColor();      
    }
}
</script>
</html>