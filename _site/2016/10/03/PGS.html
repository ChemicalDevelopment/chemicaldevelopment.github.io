<!DOCTYPE HTML>
<!--
	Alpha by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>PGS (Prime Generator Search)</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
			<!--[if lte IE 8]><script src="/assets/css/ie/html5shiv.js"></script><![endif]-->
		<script src="/assets/js/jquery.min.js"></script>
		<script src="/assets/js/jquery.dropotron.min.js"></script>
		<script src="/assets/js/skel.min.js"></script>
		<script src="/assets/js/skel-layers.min.js"></script>
		<script src="/assets/js/jquery.scrollgress.min.js"></script>
		<script src="/assets/js/init.js"></script>
		<script src="https://www.gstatic.com/firebasejs/3.3.0/firebase.js"></script>
		<script src="https://www.gstatic.com/firebasejs/3.3.0/firebase-app.js"></script>
		<script src="https://www.gstatic.com/firebasejs/3.3.0/firebase-auth.js"></script>
		<script src="https://www.gstatic.com/firebasejs/3.3.0/firebase-database.js"></script>
		<noscript>
			<link rel="stylesheet" href="/assets/css/skel.css" />
			<link rel="stylesheet" href="/assets/css/style.css" />
			<link rel="stylesheet" href="/assets/css/style-desktop.css" />
		</noscript>
		<!--[if lte IE 8]><link rel="stylesheet" href="/assets/css/ie/v8.css" /><![endif]-->
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<title>PGS (Prime Generator Search)</title>
		<meta name="description" content="If you’ve ever read about primes, you have probably wondered how do we generate them? How do we find more?">

		<link rel="stylesheet" href="/css/main.css">
		<link rel="canonical" href="http://localhost:4001/2016/10/03/PGS.html">
		<link rel="alternate" type="application/rss+xml" title="Chemical Development" href="http://localhost:4001/feed.xml">

		
		
		<!--
		
		Math Highlighting
		
		-->
	
		<script type="text/x-mathjax-config">
			MathJax.Hub.Config({
			tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
			});
		</script>
		
		<script type="text/javascript" async
		src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
		</script>
	</head>
	
		<body>
			<section id="banner"></section>
	
	<!-- Header -->
	<header id="header" class="alt">
		<h1><a href="/index.html">ChemicalDevelopment</a> by Cade Brown</h1>
		<nav id="nav">
			<ul>
				<li><a href="/index.html">Home</a></li>
				<li><a href="/about/">About</a></li>
				<li><a href="/blog">Blog</a></li>
				<li><a href="/software/">Software</a></li>
				<!--<li>
					<a href="" class="icon fa-angle-down">Layouts</a>
					<ul>
						<li><a href="#">Generic</a></li>
						<li><a href="#">Contact</a></li>
						<li><a href="#">Elements</a></li>
						<li>
							<a href="">Submenu</a>
							<ul>
								<li><a href="#">Option One</a></li>
								<li><a href="#">Option Two</a></li>
								<li><a href="#">Option Three</a></li>
								<li><a href="#">Option Four</a></li>
							</ul>
						</li>
					</ul>
				</li>
				<li><a href="#" class="button">Sign Up</a></li>
				-->
			</ul>
		</nav>
	</header>

	<!-- Main -->
	<section id="main" class="container">

	<section class="box post">
		<h3>PGS (Prime Generator Search)</h3>
		<span class="date">03 Oct 2016</span>
		<p>If you’ve ever read about primes, you have probably wondered how do we generate them? How do we find more?</p>

<p>If you haven’t read my post on primes, it is a good prerequisite to this post, so I’d suggest trying that first.</p>

<h2 id="forms">Forms</h2>

<p>A form is a way to write something.</p>

<p>You can write $ 6 $ as $ 2n $ because $ 6 = 2 * 3 $.
Here, $ n = 3 $, so it has this form.</p>

<p>$ 9 $ is part of a form: $ n^2 $ because $ 9 = 3^2 $.
Here, $ n = 3 $</p>

<h1 id="prime-forms">Prime Forms</h1>

<p>Forms of primes are formulas, like $ 2n $ or $ n^2 $ which hold primes.</p>

<p>For example, all primes except $2$ can be written as $2n+1$. If they were $2n$, then they would not be prime (except for $2$, of course)</p>

<p>Currently, world records for sizes of primes are being broken by GIMPS - which searches for Mersenne primes.</p>

<p><a href="http://www.mersenne.org/">GIMPS</a> searches numbers that are of the form: $ 2^n-1 $, and tests them for primality</p>

<p><a href="http://www.primegrid.com/">Prime Grid</a> searches lots of forms, most notably $ a2^n\pm1 $</p>

<p>They also search prime generators, which they broke a record for $an+b$ which is called <a href="https://www.primegrid.com/download/AP26.pdf">AP26</a></p>

<p>What they found was for $ n = 0 . . . 25 $, $a * n + b$ is prime for $a = 23681770*223092870$ and $b = 43142746595714191$</p>

<p>Which broke the previous world record.</p>

<p><a href="http://pgs.chemicaldevelopment.us">PGS</a> is my program, which searches for polynomials which generate primes for the first values.</p>

<p>Currently, we are searching quadratics, which are of form: $an^2 + bn + c$. We haven’t broken any records yet, but we hope to soon.
PGS is running on UTK’s (University of Tennessee Knoxville) super computer, Newton.</p>

<p>Although it is much faster than any home computer, users can donate their CPU time to check a small block of coefficients.</p>

<h2 id="pgs">PGS</h2>

<p>PGS is a project I have worked on for 3 months now, and just recently added user support and online record keeping.</p>

<p>Here’s how it works.</p>

<p>When you download a release, that includes a few things. A <code class="highlighter-rouge">node</code> executable for your platform. Along with the programs:<code class="highlighter-rouge">PGS.js</code>, <code class="highlighter-rouge">lib.o</code>, <code class="highlighter-rouge">CPGS.o</code>.</p>

<p>Note that PGS.js is just source, while the <code class="highlighter-rouge">.o</code> files are compiled files. The source for everything in PGS is on <a href="https://github.com/ChemicalDevelopment/pgs">Github</a></p>

<p>You enter in your email and password that you signed up with in <code class="highlighter-rouge">my.prefs</code>, and click run.sh. It logs you in, then starts gathering workloads from my server, and runs each using <code class="highlighter-rouge">CPGS.o</code>.
Once these finish, PGS grabs another one, and starts it. It keeps going and going until it is killed, or your prefs specify to stop. It then gracefully shuts down, and marks all of your jobs as incomplete, so the server knows you didn’t finish them.</p>

<p>You will notice a quite large file - <code class="highlighter-rouge">primes.dat</code> which is 250MB. This is not downloaded in the zip. If PGS determines that you don’t have a primes.dat file, it generates one with <code class="highlighter-rouge">lib.o</code>.
This is a bitset - which I’ll explain later - which stores information so I know whether or not every number below $2,000,000,000$ is prime. This is used later to verify whether numbers are prime.</p>

<p>I’ll go into specific parts down below.</p>

<h3 id="bitset">Bitset</h3>

<p>I’m going to assume you know the binary number system for this part. If not, just think of 1 as a “yes” and 0 as a “no”.</p>

<p>So, there are plenty of algorithms to generate the first few primes. I use the Sieve of Eratosthenes to compute a list.</p>

<p>But, if we stored the primes as an array, like [2, 3, 5, 7] this would take up too much space. How much space exactly?</p>

<p>Well, 32 bit integers which can store up to 2^32 each take up 4 bytes because each byte is 8 bits, and 32 / 8 = 4</p>

<p>If we wanted to store each prime under 2,000,000,000, we would have to store over 98,000,000,000. This takes up more space, and is slower at runtime than a bitset, which is explained below.</p>

<p>This approach will take 98,000,000 integers of space (each is 32 bits, which is 4 bytes), and when we check at runtime, we will need to check every integer in the array until we find it, or we find a number that is greater than it.</p>

<p>For example, say I give you a small list of primes: [2, 3, 5, 7, 11, 13, 17, 19]. I ask you if 15 is prime. How do you tell me?</p>

<p>Well, you would go through the list and compare each to 15.</p>

<p>Is 2 = 15?</p>

<p>Is 3 = 15?</p>

<p>. . .</p>

<p>Is 17 = 15?</p>

<p>At this point, you can stop because you have passed where 15 would be, so you know it isn’t prime.</p>

<p>Now then, let’s say we use a list of bits to tell you if the number is prime. The list above would look like:</p>

<p><code class="highlighter-rouge">001101010001010001010</code></p>

<p>This starts at 0, and goes to 19</p>

<p>The <code class="highlighter-rouge">1</code>s mean that the index is prime, so count from the left: <code class="highlighter-rouge">0</code>, <code class="highlighter-rouge">1</code>, <code class="highlighter-rouge">2</code></p>

<p><span style="color: red; font-size: 2em;">001</span><span style="font-size: 2em;">101010001010001010</span></p>

<p>The last number in red is <code class="highlighter-rouge">1</code>, which indicates that <code class="highlighter-rouge">2</code> is prime.</p>

<p>In this case, if I asked you to check if 15 is prime, you don’t need to go through all the numbers in the list; All you need to do is skip to 0 . . . 15, and check that single bit.</p>

<p>And for memory usage, the first approach uses 98000000 integers, whereas this one can store 32 numbers in a single integer (using the list of <code class="highlighter-rouge">1</code>s and <code class="highlighter-rouge">0</code>s), so we would need $2000000000/32 = 62500000$ integers.</p>

<p>So it uses about 60% as much memory as the first approach, and is much faster to use.</p>

<p>We store the array of integers from the second approach in a file, then read it back when you run.</p>

<p>So, it uses 250mb of ram per thread you run, which everyone should have.</p>

<h3 id="checking-a-polynomials">Checking a polynomials</h3>

<p>This part is pretty straight forward. We run 3 for loops which check each possibiliy of a, b, and c within certain ranges.</p>

<p>Then, it keeps evaluating until it finds a value which is not prime. Once it does, if the number of primes was greater than 60, or it has at least 40 distinct in a row, it prints the result out.</p>

<p>It uses the file we created above to verify whether each number is prime, by checking the $(an^2+bn+c)$th bit of the list of <code class="highlighter-rouge">1</code>s and <code class="highlighter-rouge">0</code>s</p>

<p>So, say we are testing $f(n) = an^2+bn+c$</p>

<p>We first plug in n = 0, and we test whether $a0^2+b0^2+c$ is prime</p>

<p>Then, n = 1, and so on until the function isnt prime.</p>


	</section>
  <div id="disqus_thread"></div>
    <script>
    /**
    * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
    */
    
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = '//chemicaldevelopment.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> 
  </div>
		</section>
		<!-- Footer -->
			<footer id="footer">
				<ul class="icons">
					<li><a href="https://twitter.com/dev_ceb" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
					<li><a href="https://github.com/ChemicalDevelopment/" class="icon fa-github"><span class="label">Github</span></a></li>
					<li><a href="/contact/" class="icon fa-envelope"><span class="label">Email</span></a></li>
				</ul>
				<ul class="copyright">
					<li>ChemicalDevelopment.</li>
					<li><a href="/licensing/">Licensing</a></li>
				</ul>
			</footer>
	</body>
</html>